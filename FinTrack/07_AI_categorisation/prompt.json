{
  "prompt": "Below is a list of bank transactions exported from a sqlite database. Please follow these instructions:\n\nFor each transaction:\nStep 1: Explain what kind of transaction this is, using clues from the 'sender_receiver', 'purpose', and 'booking_text' fields. Provide a short reasoning for your decision.\nStep 2: Based on your explanation, pick the best category from the following fixed list: Hausehold, Electricity, Maintenance, Rent, Salary, Bank loan, Taxes and Fees, Insurance, Leisure, Creditcard, Medicine, Sport, Clothing, Transportation, ATM, Other.\nStep 3: Assign a keyword representing the main merchant or company name (not the full transaction text).\nStep 4: Assign a confidence score (between 0 and 1) for your categorization.\n\nAdditional rules:\n- Use only 'booking_text', 'sender_receiver', and 'purpose' from each transaction to create keywords and assign categories. For analysis of each transaction, first consider 'sender_receiver' and 'purpose', and if you can't determine keyword and category, then add 'booking_text'.\n- Each keyword must be unique and assigned to only one category.\n- Each unique keyword shall appear only once within the given category.\n- For each transaction, create at least one keyword.\n- If a transaction does not fit any category, assign it to 'Other'.\n- Each category must appear only once in the JSON list. If multiple transactions belong to the same category, group all their keywords together in a single object for that category.\n- Output the result as a JSON list of objects, each with a 'Category' and a list of 'Keywords'.\n- Do not use any categories other than those listed above.\n- Disregard letter capitalisation and punctuation when generating keywords and categories (e.g. \"ROSSMANN\" shall be identical to \"Rossmann\" or \"rossmann\".).\n- If you find the word \"ROSSMANN\", \"FRISCHEPARADIES\", \"BABY WALZ\", \"ERNSTINGS FAM\", \"ERNSTINGS FAM.WIEN\", \"REWE\", \"ALNATURA\", \"LE CROBAG\", \"SPAR Gourmet\", \"OKAY Markt\", \"DM DROGERIEMARKT\", \"ZEIT FUER BROT\", \"BackWerk\" in the booking_text, sender_receiver, or purpose, always categorize as 'Hausehold'.\n- If you find the phrase DT. APOTHEKER U. Ã„RZTEBANK in the booking_text or sender_receiver, always categorize as 'Medicine'.\n- If the purpose field contains leisure-related keywords (e.g., \"coffee\",\"kaffee\", \"restaurant\", \"cafe\", \"mcdonalds\", \"sips\", \"sushi\", \"burger\", \"gastro\", \"bistro\", \"bar\", \"currys\", \"taverna\", \"noodle\", \"friendlys\", \"einstein\", \"michelangelo\", \"proMinent\", \"di russillo\", \"kuchenladen\", \"aroma\", \"master burger\", \"luca\", \"curry\", \"noodlehouse\", \"tchibo\", \"anatolische\", \"caffee\", \"marche\", \"burgerking\"), or if the 'sender_receiver', 'purpose' or 'booking_text' contain names of restaurants, cafes, or food-related businesses (such as those containing these words), always assign the 'Leisure' category, regardless of other fields.\n- If the booking_text field contains \"Kartenzahlung\", do not assign \"Bank loan\" even if in sender_receiver field is written \"Reiffeisen Bank\".\n- When generating keywords, use only the main store or company name, not the full transaction text.\n- If you find words such as 'bargeldauszahlung', 'geldautomat', or 'ausz.' in any field, always categorize as 'ATM'.\n- Each keyword must appear in only one category in the output.\n- Do not duplicate categories in the output.\n- Carefully scan all transactions for recurring merchant names, payment processors, and common terms. Add each as a keyword to the most appropriate category. Avoid leaving frequent merchants in \"Other\".\n- If a merchant or term appears in many transactions, always assign it to a specific category, not \"Other\".\n- If a merchant is a government office, tax authority, or public service, prefer 'Taxes and Fees'. If it is a restaurant, cafe, or entertainment, prefer 'Leisure'. If it is a household goods store or bakery, prefer 'Hausehold'.\n- When matching keywords, always look for the main recognizable part of the merchant or company name, even if there are extra words, numbers, or symbols before or after it. For example, \"Seyderlitz-Apotheke\" and \"Apotheke\" should both be categorized as 'Medicine', \"Anatolische Kuche\" and \"Kuche\" as 'Leisure', and any variant of \"Brotmeisterei\" (such as \"Vielen Dank Ihre Brotmeisterei 0001\") as 'Hausehold'.\n- Ignore numbers, dashes, or extra words that do not change the main identity of the merchant or business.\n- If a keyword is a substring of a longer merchant name, still assign it to the correct category (e.g., \"Apotheke\" in \"Seyderlitz-Apotheke\" means 'Medicine').\n- If the purpose field contains DIY/home improvement and garden centers related keywords (e.g., \"hellweg\", \"hauswartung\", \"bauhaus\" in the 'sender_receiver', 'purpose', or 'booking_text' fields, always assign the 'Maintenance' category, regardless of other fields.\n- If the purpose field contains mobility or travel or transportation related keywords (e.g., \"aral\",\"s-bahn\") either in the 'sender_receiver' or 'purpose' or 'booking_text' always assign the 'travel' category, regardless of other fields.\n- Take into consideration that fields 'booking_text', 'sender_receiver', and 'purpose' could be both in german and english languages.\n\nSample Output Format:\n[\n  {\n    \"Category\": \"Hausehold\",\n    \"Keywords\": [\n      {\n        \"keyword\": \"rossmann\",\n        \"reasoning\": \"Rossmann is a well-known drugstore chain, typically associated with household purchases.\",\n        \"confidence\": 0.95\n      }\n    ]\n  }\n]\n"
}
